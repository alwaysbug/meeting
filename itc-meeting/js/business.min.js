api.userPost("user/me",{},myCompany);function myCompany(a){if(a.data.user.companies.length>1){$(".down_arrow").show()}$(".company").html(a.data.user.companies[0].companyName);$(".user").html(a.data.user.user.nickname)}$(".user_loginOut_icon").on("click",function(){$("#login_out").modal("show")});$(".login_out_btn").on("click",function(){api.userPost("auth/logout",{},function(){window.location.href="register.html?login"})});var tipsSlideSpeed=200;$(".user_news_icon").on("click",function(){$(".person_sets").slideUp(tipsSlideSpeed);$(".companys").slideUp(tipsSlideSpeed);$(".person_tips").slideToggle(tipsSlideSpeed)});$(".user_set_icon").on("click",function(){$(".person_tips").slideUp(tipsSlideSpeed);$(".companys").slideUp(tipsSlideSpeed);$(".person_sets").slideToggle(tipsSlideSpeed)});$(".down_arrow").on("click",function(){$(".person_sets").slideUp(tipsSlideSpeed);$(".person_tips").slideUp(tipsSlideSpeed);$(".companys").slideToggle(tipsSlideSpeed)});$(".companys").on("click","li",function(){$(".companys").slideUp(tipsSlideSpeed)});$(".wrapper").on("click",function(){$(".tips").slideUp(tipsSlideSpeed);$(".companys").slideUp(tipsSlideSpeed)});$(".slide-wrapper").on("click",function(){$(".tips").slideUp(tipsSlideSpeed)});$(".sureChange").on("click",function(){var a={"old_password":$(".oldpassword").val(),"new_password":$(".newpassword").val()};api.userPost("user/password",a,function(b){$(".tips_text").html(b.message);$("#no_groups").modal("show");$(".tips").slideUp(200)})});var num_speed=1.5;var monthBool=true;$("#hour_time").on("click",function(){monthBool=!monthBool;if(monthBool){$("#leftSpan1ul").slideUp(tipsSlideSpeed)}else{$("#leftSpan1ul").slideToggle(tipsSlideSpeed)}});var month=nowTimer();function nowTimer(){var d=new Date();var b=d.getFullYear();var a=d.getMonth()+1;if(a>=1&&a<=9){a="0"+a}var c=b+"-"+a;return c}$("#hour_time").html(month);$("#leftSpan1ul li").on("click",function(){$("#hour_time").html($(this).html());month=$(this).html();api.get("stat/dailyMeetingRoomUsage?date="+month,{},meetRoom);$("#leftSpan1ul").slideUp(tipsSlideSpeed);monthBool=true});api.get("stat/monthly",{},showStat);function showStat(e){var d=e.data.meetingDuration;var b=e.data.attendedNum;var c=e.data.appointedMeetingNum;var a=e.data.canceledMeetingNum;$(".leftSpan2").html(d);$(".leftSpan3").html(b);$(".leftSpan4").html(c);$(".leftSpan5").html(a);new CountUp("meetHours",0,d,1,num_speed).start();new CountUp("meetAttends",0,b,0,num_speed).start();new CountUp("meetApp",0,c,0,num_speed).start();new CountUp("meetCancel",0,a,0,num_speed).start()}api.get("stat/dailyMeetingRoomUsage?date="+month,{},meetRoom);function meetRoom(b){var a=b.data.horizontalRooms;var c=b.data.verticalPercentage;barTable(a,c)}api.get("stat/monthlyMeetingAppointment",{},meetRooms);function meetRooms(b){var a=b.data.horizontalDays;var e=b.data.allAppointmentMeetingStat;var d=b.data.auditedMeetingStat;var c=b.data.canceledMeetingStat;roundTable(a,e,d,c)}function barTable(c,a){var d=echarts.init(document.getElementById("bar_table"));var b={color:["#3398DB"],tooltip:{trigger:"axis",formatter:"{b}: {c}%",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"5%",containLabel:true},xAxis:[{type:"category",data:c,axisTick:{alignWithLabel:true}}],yAxis:[{type:"value",min:0,max:300,axisLabel:{formatter:"{value}% "}}],dataZoom:[{type:"inside",start:0,end:50},{type:"slider",show:true,start:0,end:50,bottom:"0px"}],series:[{name:"预定频率",type:"bar",barWidth:"60%",data:a}]};d.setOption(b)}function roundTable(a,f,d,c){var e=echarts.init(document.getElementById("roundTable"));var b={title:{text:"",left:"50%",textAlign:"center"},tooltip:{trigger:"asix",axisPointer:{lineStyle:{color:"#ddd"}},backgroundColor:"rgba(255,255,255,1)",padding:[5,10],textStyle:{color:"#7588E4",},extraCssText:"box-shadow: 0 0 5px rgba(0,0,0,0.3)"},xAxis:{type:"category",data:a,boundaryGap:false,splitLine:{show:true,interval:"auto",lineStyle:{color:["#D4DFF5"]}},axisTick:{show:false},axisLine:{lineStyle:{color:"#609ee9"}},axisLabel:{margin:10,textStyle:{fontSize:14}}},yAxis:{type:"value",splitLine:{lineStyle:{color:["#D4DFF5"]}},axisTick:{show:false},axisLine:{lineStyle:{color:"#609ee9"}},min:0,max:100,axisLabel:{formatter:"{value}"}},series:[{name:"会议预约",type:"line",smooth:true,showSymbol:false,symbol:"circle",symbolSize:6,data:f,itemStyle:{normal:{color:"#f7b851"}},lineStyle:{normal:{width:1.5}}},{name:"会议审核",type:"line",smooth:true,showSymbol:false,symbol:"circle",symbolSize:6,data:d,itemStyle:{normal:{color:"#58c8da"}},lineStyle:{normal:{width:1.5}}},{name:"会议取消",type:"line",smooth:true,showSymbol:false,symbol:"circle",symbolSize:6,data:c,itemStyle:{normal:{color:"rgb(225,0,0)"}},lineStyle:{normal:{width:1.5}}}]};e.setOption(b)};